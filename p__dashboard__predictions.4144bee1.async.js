(self["webpackChunkai_prophet_front"]=self["webpackChunkai_prophet_front"]||[]).push([[9533],{15812:function(t){t.exports={standardList:"antd-pro-pages-dashboard-predictions-style-standardList",headerInfo:"antd-pro-pages-dashboard-predictions-style-headerInfo",listContent:"antd-pro-pages-dashboard-predictions-style-listContent",listContentItem:"antd-pro-pages-dashboard-predictions-style-listContentItem",extraContentSearch:"antd-pro-pages-dashboard-predictions-style-extraContentSearch",listCard:"antd-pro-pages-dashboard-predictions-style-listCard",standardListForm:"antd-pro-pages-dashboard-predictions-style-standardListForm",formResult:"antd-pro-pages-dashboard-predictions-style-formResult"}},47840:function(t){t.exports={"ant-list":"ant-list","ant-list-pagination":"ant-list-pagination","ant-pagination-options":"ant-pagination-options","ant-list-more":"ant-list-more","ant-list-spin":"ant-list-spin","ant-list-empty-text":"ant-list-empty-text","ant-list-items":"ant-list-items","ant-list-item":"ant-list-item","ant-list-item-meta":"ant-list-item-meta","ant-list-item-meta-avatar":"ant-list-item-meta-avatar","ant-list-item-meta-content":"ant-list-item-meta-content","ant-list-item-meta-title":"ant-list-item-meta-title","ant-list-item-meta-description":"ant-list-item-meta-description","ant-list-item-action":"ant-list-item-action","ant-list-item-action-split":"ant-list-item-action-split","ant-list-header":"ant-list-header","ant-list-footer":"ant-list-footer","ant-list-empty":"ant-list-empty","ant-list-split":"ant-list-split","ant-list-loading":"ant-list-loading","ant-list-spin-nested-loading":"ant-list-spin-nested-loading","ant-list-something-after-last-item":"ant-list-something-after-last-item","ant-spin-container":"ant-spin-container","ant-list-lg":"ant-list-lg","ant-list-sm":"ant-list-sm","ant-list-vertical":"ant-list-vertical","ant-list-item-main":"ant-list-item-main","ant-list-item-extra":"ant-list-item-extra","ant-list-grid":"ant-list-grid","ant-col":"ant-col","ant-list-item-no-flex":"ant-list-item-no-flex","ant-list-bordered":"ant-list-bordered","ant-list-rtl":"ant-list-rtl",ReactVirtualized__List:"ReactVirtualized__List"}},16093:function(t,e,n){"use strict";n.r(e),n.d(e,{BasicList:function(){return Y},default:function(){return F}});n(66518);var a=n(95322),i=(n(14643),n(92909)),s=(n(13753),n(48429)),r=(n(12399),n(82404)),l=(n(5317),n(87555)),o=(n(52222),n(65507)),c=n(56361),d=n(44742),m=(n(55939),n(35949)),u=(n(26780),n(46567)),p=(n(11116),n(46049)),f=n(67294),h=n(49101),x=n(73935),v=n(2824),g=n(57119),Z=n(87557),b=n(56051),y=n.n(b),j=(n(97140),n(93228)),C=(n(74393),n(32703)),S=(n(50111),n(55419)),k=(n(67604),n(46906)),E=(n(68137),n(50532)),w=n(15812),N=n.n(w),O=n(85893),P=E.Z.TextArea,_={labelCol:{span:7},wrapperCol:{span:13}},I=function(t){var e=k.Z.useForm(),n=(0,d.Z)(e,1),a=n[0],i=t.done,r=t.visible,l=t.current,o=t.onDone,m=t.onCancel,p=t.onSubmit;(0,f.useEffect)((function(){a&&!r&&a.resetFields()}),[t.visible]),(0,f.useEffect)((function(){l&&a.setFieldsValue((0,c.Z)((0,c.Z)({},l),{},{createdAt:l.createdAt?y()(l.createdAt):null}))}),[t.current]);var h=function(){a&&a.submit()},x=function(t){p&&p(t)},v=i?{footer:null,onCancel:o}:{okText:"\u4fdd\u5b58",onOk:h,onCancel:m},g=function(){return i?(0,O.jsx)(S.ZP,{status:"success",title:"\u64cd\u4f5c\u6210\u529f",subTitle:"\u4e00\u7cfb\u5217\u7684\u4fe1\u606f\u63cf\u8ff0\uff0c\u5f88\u77ed\u540c\u6837\u4e5f\u53ef\u4ee5\u5e26\u6807\u70b9\u3002",extra:(0,O.jsx)(s.Z,{type:"primary",onClick:o,children:"\u77e5\u9053\u4e86"}),className:N().formResult}):(0,O.jsxs)(k.Z,(0,c.Z)((0,c.Z)({},_),{},{form:a,onFinish:x,children:[(0,O.jsx)(k.Z.Item,{name:"title",label:"\u4efb\u52a1\u540d\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"}],children:(0,O.jsx)(E.Z,{placeholder:"\u8bf7\u8f93\u5165"})}),(0,O.jsx)(k.Z.Item,{name:"createdAt",label:"\u5f00\u59cb\u65f6\u95f4",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5f00\u59cb\u65f6\u95f4"}],children:(0,O.jsx)(C.Z,{showTime:!0,placeholder:"\u8bf7\u9009\u62e9",format:"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}})}),(0,O.jsx)(k.Z.Item,{name:"owner",label:"\u4efb\u52a1\u8d1f\u8d23\u4eba",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4efb\u52a1\u8d1f\u8d23\u4eba"}],children:(0,O.jsxs)(j.Z,{placeholder:"\u8bf7\u9009\u62e9",children:[(0,O.jsx)(j.Z.Option,{value:"\u4ed8\u6653\u6653",children:"\u4ed8\u6653\u6653"}),(0,O.jsx)(j.Z.Option,{value:"\u5468\u6bdb\u6bdb",children:"\u5468\u6bdb\u6bdb"})]})}),(0,O.jsx)(k.Z.Item,{name:"subDescription",label:"\u4ea7\u54c1\u63cf\u8ff0",rules:[{message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26\u7684\u4ea7\u54c1\u63cf\u8ff0\uff01",min:5}],children:(0,O.jsx)(P,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26"})})]}))};return(0,O.jsx)(u.Z,(0,c.Z)((0,c.Z)({title:i?null:"\u4efb\u52a1".concat(l?"\u7f16\u8f91":"\u6dfb\u52a0"),className:N().standardListForm,width:640,bodyStyle:i?{padding:"72px 0"}:{padding:"28px 0 0"},destroyOnClose:!0,visible:r},v),{},{children:g()}))},L=I,T=n(636),z=void 0,M=p.Z.Link,A=function(t){var e=t.title,n=t.value,a=t.bordered;return(0,O.jsxs)("div",{className:N().headerInfo,children:[(0,O.jsx)("span",{children:e}),(0,O.jsx)("p",{children:n}),a&&(0,O.jsx)("em",{})]})},D=u.Z.confirm,H=function(t){var e=t.data.fields,n=e.time_start,a=e.status;return(0,O.jsxs)("div",{className:N().listContent,children:[(0,O.jsxs)("div",{className:N().listContentItem,children:[(0,O.jsx)("span",{children:(0,O.jsx)(Z._H,{id:"basic.list.starttime"})}),(0,O.jsx)("p",{children:y()(n).format("YYYY-MM-DD HH:mm")})]}),(0,O.jsx)("div",{className:N().listContentItem,children:(0,O.jsx)(m.Z,{percent:a,status:100===a?"success":"active",strokeWidth:6,style:{width:180}})})]})},Y=function(t){var e=(0,f.useRef)(null),n=t.loading,m=t.dispatch,u=(0,f.useState)(!1),p=(0,d.Z)(u,2),b=p[0],y=p[1],j=(0,f.useState)(!1),C=(0,d.Z)(j,2),S=C[0],k=C[1],E=(0,f.useState)(void 0),w=(0,d.Z)(E,1),P=w[0],_=(0,f.useState)([]),I=(0,d.Z)(_,2),Y=I[0],F=I[1],R=(0,f.useState)(1),K=(0,d.Z)(R,2),q=K[0],V=K[1],B=(0,f.useState)(1),W=(0,d.Z)(B,2),J=W[0],Q=W[1],U=(0,f.useState)(1),$=(0,d.Z)(U,2),G=$[0],X=$[1],tt=(0,f.useState)(1),et=(0,d.Z)(tt,2),nt=et[0],at=et[1],it=(0,f.useState)(void 0),st=(0,d.Z)(it,2),rt=st[0],lt=st[1],ot=(0,f.useState)(void 0),ct=(0,d.Z)(ot,2),dt=ct[0],mt=ct[1];(0,f.useEffect)((function(){(0,T.Z)("/tasks/list",{method:"POST",data:{page:1}}).then((function(t){F(t.data.list),V(t.data.totalCount),Q(t.data.numPerPage)}))}),[1]);var ut=function(t){X(t),(0,T.Z)("/tasks/list",{method:"POST",data:{page:t}}).then((function(t){F(t.data.list),V(t.data.totalCount),Q(t.data.numPerPage)}))};(0,f.useEffect)((function(){(0,T.Z)("/users/getUserInfo",{method:"POST"}).then((function(t){at(t.data.credit)}))}),[1]),(0,f.useEffect)((function(){(0,T.Z)("/tasks/numTask",{method:"POST"}).then((function(t){lt(t.data.num_of_task),mt(t.data.num_of_finished_tasks)}))}),[1]);var pt={showQuickJumper:!0,pageSize:J,total:q,onChange:ut.bind(z)},ft=function(){Z.m8.push("/dash/prediction/aimodels")},ht=(0,O.jsx)("div",{className:N().extraContent}),xt=function(){if(e.current){var t=(0,x.findDOMNode)(e.current);setTimeout((function(){return t.blur()}),0)}},vt=function(){xt(),y(!1),k(!1)},gt=function(){xt(),k(!1)},Zt=function(t){var e=P?P.id:"";xt(),y(!0),m({type:"listAndbasicList/submit",payload:(0,c.Z)({id:e},t)})};return(0,O.jsxs)("div",{children:[(0,O.jsx)(v.ZP,{children:(0,O.jsxs)("div",{className:N().standardList,children:[(0,O.jsx)(r.Z,{bordered:!1,children:(0,O.jsxs)(l.Z,{children:[(0,O.jsx)(o.Z,{sm:8,xs:24,children:(0,O.jsx)(A,{title:(0,Z.wv)({id:"basic.list.prediction"}),value:dt,bordered:!0})}),(0,O.jsx)(o.Z,{sm:8,xs:24,children:(0,O.jsx)(A,{title:(0,Z.wv)({id:"basic.list.balance"}),value:"".concat(nt),bordered:!0})}),(0,O.jsx)(o.Z,{sm:8,xs:24,children:(0,O.jsx)(A,{title:(0,Z.wv)({id:"basic.list.numtask"}),value:rt})})]})}),(0,O.jsxs)(r.Z,{className:N().listCard,bordered:!1,title:(0,Z.wv)({id:"basic.list.tasklist"}),style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:ht,children:[(0,O.jsxs)(s.Z,{type:"dashed",style:{width:"100%",marginBottom:8},onClick:ft,ref:e,children:[(0,O.jsx)(h.Z,{}),(0,O.jsx)(Z._H,{id:"basic.list.add"})]}),(0,O.jsx)(a.ZP,{size:"large",rowKey:"id",loading:n,pagination:pt,dataSource:Y,renderItem:function(t){return(0,O.jsxs)(a.ZP.Item,{actions:[(0,O.jsx)(M,{onClick:function(){Z.m8.push("/dash/prediction/details/".concat(t.pk))},children:(0,O.jsx)(Z._H,{id:"basic.list.details"})},"details"),(0,O.jsx)(M,{onClick:function(){D({title:"".concat((0,Z.wv)({id:"basic.list.suredelete"})),icon:(0,O.jsx)(g.Z,{}),content:"",okText:"".concat((0,Z.wv)({id:"basic.list.yes"})),okType:"danger",cancelText:"".concat((0,Z.wv)({id:"basic.list.no"})),onOk:function(){console.log("OK"),(0,T.Z)("/tasks/del",{method:"POST",data:{task_id:t.pk}}).then((function(t){200===t.code?ut(G):i.default.error("Delete failed due to unknown reason")}))},onCancel:function(){}})},children:(0,O.jsx)(Z._H,{id:"basic.list.delete"})},"delete")],children:[(0,O.jsx)(a.ZP.Item.Meta,{title:(0,O.jsx)("a",{children:t.fields.ai_name}),description:t.fields.description}),(0,O.jsx)(H,{data:t})]})}})]})]})}),(0,O.jsx)(L,{done:b,current:P,visible:S,onDone:vt,onCancel:gt,onSubmit:Zt})]})},F=(0,Z.$j)((function(t){var e=t.listAndbasicList,n=t.loading;return{listAndbasicList:e,loading:n.models.listAndbasicList}}))(Y)},95322:function(t,e,n){"use strict";n.d(e,{ZM:function(){return S},ZP:function(){return E}});var a=n(66156),i=n(3066),s=n(4763),r=n(19877),l=n(47103),o=n(67294),c=n(35510),d=n.n(c),m=n(87240),u=n(31312),p=n(85748),f=n(67170),h=n(54115),x=n(69160),v=n(18316),g=n(75447),Z=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(t);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(t,a[i])&&(n[a[i]]=t[a[i]])}return n},b=function(t){var e=t.prefixCls,n=t.className,a=t.avatar,s=t.title,r=t.description,l=Z(t,["prefixCls","className","avatar","title","description"]),c=o.useContext(f.E_),m=c.getPrefixCls,u=m("list",e),p=d()("".concat(u,"-item-meta"),n),h=o.createElement("div",{className:"".concat(u,"-item-meta-content")},s&&o.createElement("h4",{className:"".concat(u,"-item-meta-title")},s),r&&o.createElement("div",{className:"".concat(u,"-item-meta-description")},r));return o.createElement("div",(0,i.Z)({},l,{className:p}),a&&o.createElement("div",{className:"".concat(u,"-item-meta-avatar")},a),(s||r)&&h)},y=function(t){var e=t.prefixCls,n=t.children,a=t.actions,r=t.extra,l=t.className,c=t.colStyle,m=Z(t,["prefixCls","children","actions","extra","className","colStyle"]),u=o.useContext(S),p=u.grid,h=u.itemLayout,x=o.useContext(f.E_),b=x.getPrefixCls,y=function(){var t;return o.Children.forEach(n,(function(e){"string"===typeof e&&(t=!0)})),t&&o.Children.count(n)>1},j=function(){return"vertical"===h?!!r:!y()},C=b("list",e),k=a&&a.length>0&&o.createElement("ul",{className:"".concat(C,"-item-action"),key:"actions"},a.map((function(t,e){return o.createElement("li",{key:"".concat(C,"-item-action-").concat(e)},t,e!==a.length-1&&o.createElement("em",{className:"".concat(C,"-item-action-split")}))}))),E=p?"div":"li",w=o.createElement(E,(0,i.Z)({},m,{className:d()("".concat(C,"-item"),(0,s.Z)({},"".concat(C,"-item-no-flex"),!j()),l)}),"vertical"===h&&r?[o.createElement("div",{className:"".concat(C,"-item-main"),key:"content"},n,k),o.createElement("div",{className:"".concat(C,"-item-extra"),key:"extra"},r)]:[n,k,(0,g.Tm)(r,{key:"extra"})]);return p?o.createElement(v.Z,{flex:1,style:c},w):w};y.Meta=b;var j=y,C=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(t);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(t,a[i])&&(n[a[i]]=t[a[i]])}return n},S=o.createContext({});S.Consumer;function k(t){var e,n=t.pagination,c=void 0!==n&&n,v=t.prefixCls,g=t.bordered,Z=void 0!==g&&g,b=t.split,y=void 0===b||b,j=t.className,k=t.children,E=t.itemLayout,w=t.loadMore,N=t.grid,O=t.dataSource,P=void 0===O?[]:O,_=t.size,I=t.header,L=t.footer,T=t.loading,z=void 0!==T&&T,M=t.rowKey,A=t.renderItem,D=t.locale,H=C(t,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),Y=c&&"object"===(0,l.Z)(c)?c:{},F=o.useState(Y.defaultCurrent||1),R=(0,r.Z)(F,2),K=R[0],q=R[1],V=o.useState(Y.defaultPageSize||10),B=(0,r.Z)(V,2),W=B[0],J=B[1],Q=o.useContext(f.E_),U=Q.getPrefixCls,$=Q.renderEmpty,G=Q.direction,X={current:1,total:0},tt={},et=function(t){return function(e,n){q(e),J(n),c&&c[t]&&c[t](e,n)}},nt=et("onChange"),at=et("onShowSizeChange"),it=function(t,e){return A?(n="function"===typeof M?M(t):"string"===typeof M?t[M]:t.key,n||(n="list-item-".concat(e)),tt[e]=n,A(t,e)):null;var n},st=function(){return!!(w||c||L)},rt=function(t,e){return o.createElement("div",{className:"".concat(t,"-empty-text")},D&&D.emptyText||e("List"))},lt=U("list",v),ot=z;"boolean"===typeof ot&&(ot={spinning:ot});var ct=ot&&ot.spinning,dt="";switch(_){case"large":dt="lg";break;case"small":dt="sm";break;default:break}var mt=d()(lt,(e={},(0,s.Z)(e,"".concat(lt,"-vertical"),"vertical"===E),(0,s.Z)(e,"".concat(lt,"-").concat(dt),dt),(0,s.Z)(e,"".concat(lt,"-split"),y),(0,s.Z)(e,"".concat(lt,"-bordered"),Z),(0,s.Z)(e,"".concat(lt,"-loading"),ct),(0,s.Z)(e,"".concat(lt,"-grid"),!!N),(0,s.Z)(e,"".concat(lt,"-something-after-last-item"),st()),(0,s.Z)(e,"".concat(lt,"-rtl"),"rtl"===G),e),j),ut=(0,i.Z)((0,i.Z)((0,i.Z)({},X),{total:P.length,current:K,pageSize:W}),c||{}),pt=Math.ceil(ut.total/ut.pageSize);ut.current>pt&&(ut.current=pt);var ft=c?o.createElement("div",{className:"".concat(lt,"-pagination")},o.createElement(h.Z,(0,i.Z)({},ut,{onChange:nt,onShowSizeChange:at}))):null,ht=(0,a.Z)(P);c&&P.length>(ut.current-1)*ut.pageSize&&(ht=(0,a.Z)(P).splice((ut.current-1)*ut.pageSize,ut.pageSize));var xt=(0,u.Z)(),vt=o.useMemo((function(){for(var t=0;t<p.c4.length;t+=1){var e=p.c4[t];if(xt[e])return e}}),[xt]),gt=o.useMemo((function(){if(N){var t=vt&&N[vt]?N[vt]:N.column;return t?{width:"".concat(100/t,"%"),maxWidth:"".concat(100/t,"%")}:void 0}}),[null===N||void 0===N?void 0:N.column,vt]),Zt=ct&&o.createElement("div",{style:{minHeight:53}});if(ht.length>0){var bt=ht.map((function(t,e){return it(t,e)})),yt=o.Children.map(bt,(function(t,e){return o.createElement("div",{key:tt[e],style:gt},t)}));Zt=N?o.createElement(x.Z,{gutter:N.gutter},yt):o.createElement("ul",{className:"".concat(lt,"-items")},bt)}else k||ct||(Zt=rt(lt,$));var jt=ut.position||"bottom";return o.createElement(S.Provider,{value:{grid:N,itemLayout:E}},o.createElement("div",(0,i.Z)({className:mt},H),("top"===jt||"both"===jt)&&ft,I&&o.createElement("div",{className:"".concat(lt,"-header")},I),o.createElement(m.Z,ot,Zt,k),L&&o.createElement("div",{className:"".concat(lt,"-footer")},L),w||("bottom"===jt||"both"===jt)&&ft))}k.Item=j;var E=k},66518:function(t,e,n){"use strict";n(43673),n(47840),n(93806),n(58210),n(91772),n(86178)}}]);