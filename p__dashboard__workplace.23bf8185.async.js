(self["webpackChunkai_prophet_front"]=self["webpackChunkai_prophet_front"]||[]).push([[8767],{79508:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},n=s,o=a(27029),d=function(e,t){return r.createElement(o.Z,Object.assign({},e,{ref:t,icon:n}))};d.displayName="CheckOutlined";var c=r.forwardRef(d)},54178:function(e){e.exports={activitiesList:"antd-pro-pages-dashboard-workplace-style-activitiesList",username:"antd-pro-pages-dashboard-workplace-style-username",event:"antd-pro-pages-dashboard-workplace-style-event",pageHeaderContent:"antd-pro-pages-dashboard-workplace-style-pageHeaderContent",avatar:"antd-pro-pages-dashboard-workplace-style-avatar",content:"antd-pro-pages-dashboard-workplace-style-content",contentTitle:"antd-pro-pages-dashboard-workplace-style-contentTitle",extraContent:"antd-pro-pages-dashboard-workplace-style-extraContent",statItem:"antd-pro-pages-dashboard-workplace-style-statItem",members:"antd-pro-pages-dashboard-workplace-style-members",member:"antd-pro-pages-dashboard-workplace-style-member",projectList:"antd-pro-pages-dashboard-workplace-style-projectList",cardTitle:"antd-pro-pages-dashboard-workplace-style-cardTitle",projectGrid:"antd-pro-pages-dashboard-workplace-style-projectGrid",projectItemContent:"antd-pro-pages-dashboard-workplace-style-projectItemContent",datetime:"antd-pro-pages-dashboard-workplace-style-datetime",activeCard:"antd-pro-pages-dashboard-workplace-style-activeCard"}},7903:function(e,t,a){"use strict";a.r(t);a(12399);var r=a(82404),s=(a(93806),a(3418)),n=a(60360),o=a(66646),d=a(65353),c=a(83693),i=(a(17581),a(39404)),l=(a(90930),a(23040)),p=(a(6244),a(17345)),h=(a(11116),a(46049)),u=a(67294),g=a(87557),m=a(2824),k=a(56051),f=a.n(k),v=a(54178),j=a.n(v),x=a(636),b=a(33016),w=a.n(b),y=a(85893),C=h.Z.Link,_=function(e){var t=e.currentUser,a=e.url,r=t&&Object.keys(t).length;return r?(0,y.jsxs)("div",{className:j().pageHeaderContent,children:[(0,y.jsx)("div",{className:j().avatar,children:(0,y.jsx)(l.C,{size:"large",src:a})}),(0,y.jsxs)("div",{className:j().content,children:[(0,y.jsxs)("div",{className:j().contentTitle,children:["Hello\uff0c",""!==t.nickname?t.nickname:"John doe"]}),(0,y.jsx)("div",{children:""!==t.user_sing?t.user_sing:"\u4ef0\u5929\u5927\u7b11\u51fa\u95e8\u53bb\uff0c\u6211\u8f88\u5c82\u662f\u84ec\u84bf\u4eba\u3002"})]})]}):(0,y.jsx)(p.Z,{avatar:!0,paragraph:{rows:1},active:!0})},Z=function(e){var t=e.currentUser,a=e.value;return(0,y.jsxs)("div",{className:j().extraContent,children:[(0,y.jsx)("div",{className:j().statItem,children:(0,y.jsx)(i.Z,{title:(0,y.jsx)(g._H,{id:"pages.dashboardandworkplace.workplace.numtask",defaultMessage:"Processed Predictions"}),value:a.num_of_finished_tasks})}),(0,y.jsx)("div",{className:j().statItem,children:(0,y.jsx)(i.Z,{title:(0,y.jsx)(g._H,{id:"pages.dashboardandworkplace.workplace.balance",defaultMessage:"Credit"}),value:t.credit})})]})},U=function(e){(0,d.Z)(a,e);var t=(0,c.Z)(a);function a(e){var r;return(0,n.Z)(this,a),r=t.call(this,e),r.state={data:[],data_task:{num_of_task:"",num_of_finished_tasks:""},imageURL:""},r}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;t({type:"dashboardAndworkplace/init"}),(0,x.Z)("/tasks/list",{method:"POST",data:{page:1}}).then((function(t){e.setState({data:t.data.list.slice(0,9)})})).catch((function(e){return console.log(e)})),(0,x.Z)("/tasks/numTask",{method:"POST"}).then((function(t){t.data&&e.setState({data_task:t.data})})).catch((function(e){return console.log(e)})),(0,x.Z)("/users/getUserInfo",{method:"POST"}).then((function(t){e.handleAvatar(t.data.profile_image_uuid)})).catch((function(e){return console.log(e)}))}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"dashboardAndworkplace/clear"})}},{key:"handleAvatar",value:function(e){var t=this;if(e){var a=new(w())({SecretId:"AKID21jLxxXtspX0FC9ax4h2C51kFoCNhWZg",SecretKey:"HROJDscqncKP9g0zJMJ7Mo20oHTVJsRr"});a.getObjectUrl({Bucket:"prophetsrc-1305001068",Region:"ap-chengdu",Key:"".concat(e,".jpg")},(function(e,a){t.setState({imageURL:a.Url})}))}else this.setState({imageURL:"https://prophetsrc-1305001068.cos.ap-chengdu.myqcloud.com/defalutprofile.png"})}},{key:"render",value:function(){var e=this.props.currentUser;return e&&e.username?(0,y.jsx)(m.ZP,{content:(0,y.jsx)(_,{currentUser:e,url:this.state.imageURL}),extraContent:(0,y.jsx)(Z,{currentUser:e,value:this.state.data_task}),children:(0,y.jsx)(r.Z,{className:j().projectList,style:{marginBottom:24},title:(0,y.jsx)(g._H,{id:"pages.dashboardandworkplace.workplace.cardtitle"}),bordered:!1,extra:(0,y.jsx)(C,{onClick:function(){g.m8.push("/dash/prediction/predictions")},children:(0,g.wv)({id:"pages.dashboardandworkplace.workplace.extratxt"})}),bodyStyle:{padding:0},children:0===this.state.data.length?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("br",{}),(0,y.jsx)(s.Z,{}),(0,y.jsx)("br",{})]}):this.state.data.map((function(e){return(0,y.jsx)(r.Z.Grid,{className:j().projectGrid,children:(0,y.jsxs)(r.Z,{bodyStyle:{padding:0},bordered:!1,children:[(0,y.jsx)(r.Z.Meta,{title:(0,y.jsxs)("div",{className:j().cardTitle,children:[(0,y.jsx)(l.C,{size:"large",src:"https://prophetsrc-1305001068.cos.ap-chengdu.myqcloud.com/defalt.png"}),(0,y.jsx)(C,{onClick:function(){g.m8.push("/dash/prediction/details/".concat(e.pk))},children:e.fields.ai_name})]}),description:e.fields.description}),(0,y.jsx)("div",{style:{textAlign:"right",fontSize:12},children:(0,y.jsxs)("p",{children:[" ",f()(e.fields.time_start).fromNow()," "]})})]})},e.pk)}))})}):null}}]),a}(u.Component);t["default"]=(0,g.$j)((function(e){var t=e.dashboardAndworkplace.currentUser,a=e.loading;return{currentUser:t,currentUserLoading:a.effects["dashboardAndworkplace/fetchUserCurrent"]}}))(U)}}]);