(self["webpackChunkai_prophet_front"]=self["webpackChunkai_prophet_front"]||[]).push([[1034],{72574:function(e){e.exports={menu:"antd-pro-components-global-header-index-menu",right:"antd-pro-components-global-header-index-right",topup:"antd-pro-components-global-header-index-topup",button:"antd-pro-components-global-header-index-button",action:"antd-pro-components-global-header-index-action",search:"antd-pro-components-global-header-index-search",account:"antd-pro-components-global-header-index-account",avatar:"antd-pro-components-global-header-index-avatar",dark:"antd-pro-components-global-header-index-dark"}},64890:function(e){e.exports={container:"antd-pro-components-header-dropdown-index-container"}},69337:function(e){e.exports={list:"antd-pro-components-notice-icon-notice-list-list",item:"antd-pro-components-notice-icon-notice-list-item",meta:"antd-pro-components-notice-icon-notice-list-meta",avatar:"antd-pro-components-notice-icon-notice-list-avatar",iconElement:"antd-pro-components-notice-icon-notice-list-iconElement",read:"antd-pro-components-notice-icon-notice-list-read",title:"antd-pro-components-notice-icon-notice-list-title",description:"antd-pro-components-notice-icon-notice-list-description",datetime:"antd-pro-components-notice-icon-notice-list-datetime",extra:"antd-pro-components-notice-icon-notice-list-extra",loadMore:"antd-pro-components-notice-icon-notice-list-loadMore",loadedAll:"antd-pro-components-notice-icon-notice-list-loadedAll",notFound:"antd-pro-components-notice-icon-notice-list-notFound",bottomBar:"antd-pro-components-notice-icon-notice-list-bottomBar"}},67914:function(e){e.exports={popover:"antd-pro-components-notice-icon-index-popover",noticeButton:"antd-pro-components-notice-icon-index-noticeButton",icon:"antd-pro-components-notice-icon-index-icon",badge:"antd-pro-components-notice-icon-index-badge",tabs:"antd-pro-components-notice-icon-index-tabs"}},81070:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ye}});var o=n(50189),a=n(56361),i=(n(50111),n(55419)),r=(n(13753),n(48429)),c=n(63754),s=n(67470),l=n(67294),d=n(87748),u=n(87557),p=n(99061),h=(n(14943),n(58210),n(87240)),m=(n(90930),n(23040)),g=(n(37482),n(3810)),v=n(60360),x=n(66646),f=n(65353),j=n(83693),y=n(24616),b=n(55035),Z=(n(19597),n(2291)),C=n(3911),w=n(35510),N=n.n(w),k=n(64890),M=n.n(k),T=n(85893),I=function(e){var t=e.overlayClassName,n=(0,C.Z)(e,["overlayClassName"]);return(0,T.jsx)(Z.Z,(0,a.Z)({overlayClassName:N()(M().container,t)},n))},R=I,U=n(72574),A=n.n(U),D=n(636),V=n(33016),P=n.n(V),B=function(e){(0,f.Z)(n,e);var t=(0,j.Z)(n);function n(e){var o;return(0,v.Z)(this,n),o=t.call(this,e),o.onMenuClick=function(e){var t=e.key;if("logout"!==t)u.m8.push("/dash/account/".concat(t));else{var n=o.props.dispatch;n&&n({type:"login/logout"})}},o.state={imageURL:""},o}return(0,x.Z)(n,[{key:"handleAvatar",value:function(e){var t=this;if(e){var n=new(P())({SecretId:"AKID21jLxxXtspX0FC9ax4h2C51kFoCNhWZg",SecretKey:"HROJDscqncKP9g0zJMJ7Mo20oHTVJsRr"});n.getObjectUrl({Bucket:"prophetsrc-1305001068",Region:"ap-chengdu",Key:"".concat(e,".jpg")},(function(e,n){t.setState({imageURL:n.Url})}))}else this.setState({imageURL:"https://prophetsrc-1305001068.cos.ap-chengdu.myqcloud.com/defalutprofile.png"})}},{key:"componentDidMount",value:function(){var e=this;(0,D.Z)("/users/getUserInfo",{method:"POST"}).then((function(t){t.data&&e.handleAvatar(t.data.profile_image_uuid)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=void 0===t?{avatar:"",name:""}:t,o=e.menu,a=(0,T.jsxs)(g.Z,{className:A().menu,selectedKeys:[],onClick:this.onMenuClick,children:[o&&(0,T.jsxs)(g.Z.Item,{children:[(0,T.jsx)(y.Z,{}),(0,u.wv)({id:"component.globalHeader.AvatarDropdown.settings"})]},"settings"),o&&(0,T.jsx)(g.Z.Divider,{}),(0,T.jsxs)(g.Z.Item,{children:[(0,T.jsx)(b.Z,{}),(0,u.wv)({id:"component.globalHeader.AvatarDropdown.signOut"})]},"logout")]});return n&&n.nickname?(0,T.jsx)(R,{overlay:a,children:(0,T.jsxs)("span",{className:"".concat(A().action," ").concat(A().account),children:[(0,T.jsx)(m.C,{size:"small",className:A().avatar,src:this.state.imageURL,alt:"avatar"}),document.body.clientWidth>=720&&(0,T.jsx)("span",{className:"".concat(A().name," anticon"),children:n.nickname})]})}):(0,T.jsx)("span",{className:"".concat(A().action," ").concat(A().account),children:(0,T.jsx)(h.Z,{size:"small",style:{marginLeft:8,marginRight:8}})})}}]),n}(l.Component),S=(0,u.$j)((function(e){var t=e.user;return{currentUser:t.currentUser}}))(B),K=function(e){(0,f.Z)(n,e);var t=(0,j.Z)(n);function n(){var e;(0,v.Z)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),e.onMenuClick=function(e){var t=e.key,n=document.getElementById("theme-style"),o=document.getElementsByTagName("body")[0];n?(n.href="/theme/".concat(t,".css"),o.className="body-wrap-".concat(t)):(n=document.createElement("link"),n.type="text/css",n.rel="stylesheet",n.id="theme-style",n.href="/theme/".concat(t,".css"),o.className="body-wrap-".concat(t),document.body.append(n))},e}return(0,x.Z)(n,[{key:"render",value:function(){var e=(0,T.jsxs)(g.Z,{className:A().menu,selectedKeys:[],onClick:this.onMenuClick,children:[(0,T.jsx)(g.Z.Item,{children:(0,u.wv)({id:"app.setting.themecolor.daybreak"})},"daybreak"),(0,T.jsx)(g.Z.Item,{children:(0,u.wv)({id:"app.setting.themecolor.dust"})},"dust"),(0,T.jsx)(g.Z.Item,{children:(0,u.wv)({id:"app.setting.themecolor.volcano"})},"volcano"),(0,T.jsx)(g.Z.Item,{children:(0,u.wv)({id:"app.setting.themecolor.sunset"})},"sunset"),(0,T.jsx)(g.Z.Item,{children:(0,u.wv)({id:"app.setting.themecolor.cyan"})},"cyan"),(0,T.jsx)(g.Z.Item,{children:(0,u.wv)({id:"app.setting.themecolor.green"})},"green"),(0,T.jsx)(g.Z.Item,{children:(0,u.wv)({id:"app.setting.themecolor.geekblue"})},"geekblue"),(0,T.jsx)(g.Z.Item,{children:(0,u.wv)({id:"app.setting.themecolor.purple"})},"purple")]});return(0,T.jsx)(R,{overlay:e,children:(0,T.jsx)("span",{className:"".concat(A().action," ").concat(A().account),children:(0,T.jsx)("span",{className:"".concat(A().name," anticon"),children:(0,u.wv)({id:"app.setting.themecolor"})})})})}}]),n}(l.Component),O=(0,u.$j)()(K),z=n(74356),E=(n(14643),n(92909)),F=n(7739),H=n.n(F),L=n(56051),_=n.n(L),J=(n(18514),n(33227)),$=n(44742),q=(n(84786),n(52311)),G=n(89317),W=n(82321),X=(n(66518),n(95322)),Y=n(99463),Q=n(69337),ee=n.n(Q),te=function(e){var t=e.data,n=void 0===t?[]:t,o=e.onClick,a=e.onClear,i=e.title,r=e.onViewMore,c=e.emptyText,s=e.showClear,l=void 0===s||s,d=e.clearText,u=e.viewMoreText,p=e.showViewMore,h=void 0!==p&&p;return n&&0!==n.length?(0,T.jsxs)("div",{children:[(0,T.jsx)(X.ZP,{className:ee().list,dataSource:n,renderItem:function(e,t){var n=N()(ee().item,(0,Y.Z)({},ee().read,e.read)),a=e.avatar?"string"===typeof e.avatar?(0,T.jsx)(m.C,{className:ee().avatar,src:e.avatar}):(0,T.jsx)("span",{className:ee().iconElement,children:e.avatar}):null;return(0,T.jsx)(X.ZP.Item,{className:n,onClick:function(){null===o||void 0===o||o(e)},children:(0,T.jsx)(X.ZP.Item.Meta,{className:ee().meta,avatar:a,title:(0,T.jsxs)("div",{className:ee().title,children:[e.title,(0,T.jsx)("div",{className:ee().extra,children:e.extra})]}),description:(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:ee().description,children:e.description}),(0,T.jsx)("div",{className:ee().datetime,children:e.datetime})]})})},e.key||t)}}),(0,T.jsxs)("div",{className:ee().bottomBar,children:[l?(0,T.jsxs)("div",{onClick:a,children:[d," ",i]}):null,h?(0,T.jsx)("div",{onClick:function(e){r&&r(e)},children:u}):null]})]}):(0,T.jsxs)("div",{className:ee().notFound,children:[(0,T.jsx)("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/sAuJeJzSKbUmHfBQRzmZ.svg",alt:"not found"}),(0,T.jsx)("div",{children:c})]})},ne=te,oe=n(67914),ae=n.n(oe),ie=q.Z.TabPane,re=function(e){var t=function(){var t=e.children,n=e.loading,o=e.onClear,i=e.onTabChange,r=e.onItemClick,c=e.onViewMore,s=e.clearText,d=e.viewMoreText;if(!t)return null;var u=[];return l.Children.forEach(t,(function(e){if(e){var t=e.props,n=t.list,i=t.title,l=t.count,p=t.tabKey,h=t.showClear,m=t.showViewMore,g=n&&n.length?n.length:0,v=l||0===l?l:g,x=v>0?"".concat(i," (").concat(v,")"):i;u.push((0,T.jsx)(ie,{tab:x,children:(0,T.jsx)(ne,(0,a.Z)((0,a.Z)({},e.props),{},{clearText:s,viewMoreText:d,data:n,onClear:function(){null===o||void 0===o||o(i,p)},onClick:function(t){null===r||void 0===r||r(t,e.props)},onViewMore:function(t){null===c||void 0===c||c(e.props,t)},showClear:h,showViewMore:m,title:i}))},p))}})),(0,T.jsx)(h.Z,{spinning:n,delay:300,children:(0,T.jsx)(q.Z,{className:ae().tabs,onChange:i,children:u})})},n=e.className,o=e.count,i=e.bell,r=(0,W.Z)(!1,{value:e.popupVisible,onChange:e.onPopupVisibleChange}),c=(0,$.Z)(r,2),s=c[0],d=c[1],u=N()(n,ae().noticeButton),p=t(),m=i||(0,T.jsx)(G.Z,{className:ae().icon}),g=(0,T.jsx)("span",{className:N()(u,{opened:s}),children:(0,T.jsx)(J.Z,{count:o,style:{boxShadow:"none"},className:ae().badge,children:m})});return p?(0,T.jsx)(R,{placement:"bottomRight",overlay:p,overlayClassName:ae().popover,trigger:["click"],visible:s,onVisibleChange:d,children:g}):g};re.defaultProps={emptyImage:"https://gw.alipayobjects.com/zos/rmsportal/wAhyIChODzsoKIOBHcBk.svg"},re.Tab=ne;var ce=re,se=function(e){(0,f.Z)(n,e);var t=(0,j.Z)(n);function n(){var e;(0,v.Z)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),e.changeReadState=function(t){var n=t.id,o=e.props.dispatch;o&&o({type:"global/changeNoticeReadState",payload:n})},e.handleNoticeClear=function(t,n){var o=e.props.dispatch;E.default.success("\u6e05\u7a7a\u4e86".concat(" ",t)),o&&o({type:"global/clearNotices",payload:n})},e.getNoticeData=function(){var t=e.props.notices,n=void 0===t?[]:t;if(!n||0===n.length||!Array.isArray(n))return{};var o=n.map((function(e){var t=(0,a.Z)({},e);if(t.datetime&&(t.datetime=_()(e.datetime).fromNow()),t.id&&(t.key=t.id),t.extra&&t.status){var n={todo:"",processing:"blue",urgent:"red",doing:"gold"}[t.status];t.extra=(0,T.jsx)(z.Z,{color:n,style:{marginRight:0},children:t.extra})}return t}));return H()(o,"type")},e.getUnreadData=function(e){var t={};return Object.keys(e).forEach((function(n){var o=e[n];t[n]||(t[n]=0),Array.isArray(o)&&(t[n]=o.filter((function(e){return!e.read})).length)})),t},e}return(0,x.Z)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,o=t.fetchingNotices,a=t.onNoticeVisibleChange,i=this.getNoticeData(),r=this.getUnreadData(i);return(0,T.jsxs)(ce,{className:A().action,count:n&&n.unreadCount,onItemClick:function(t){e.changeReadState(t)},loading:o,clearText:"\u6e05\u7a7a",viewMoreText:"\u67e5\u770b\u66f4\u591a",onClear:this.handleNoticeClear,onPopupVisibleChange:a,onViewMore:function(){return E.default.info("Click on view more")},clearClose:!0,children:[(0,T.jsx)(ce.Tab,{tabKey:"notification",count:r.notification,list:i.notification,title:"\u901a\u77e5",emptyText:"\u4f60\u5df2\u67e5\u770b\u6240\u6709\u901a\u77e5",showViewMore:!0}),(0,T.jsx)(ce.Tab,{tabKey:"message",count:r.message,list:i.message,title:"\u6d88\u606f",emptyText:"\u60a8\u5df2\u8bfb\u5b8c\u6240\u6709\u6d88\u606f",showViewMore:!0}),(0,T.jsx)(ce.Tab,{tabKey:"event",title:"\u5f85\u529e",emptyText:"\u4f60\u5df2\u5b8c\u6210\u6240\u6709\u5f85\u529e",count:r.event,list:i.event,showViewMore:!0})]})}}]),n}(l.Component),le=(0,u.$j)((function(e){var t=e.user,n=e.global,o=e.loading;return{currentUser:t.currentUser,collapsed:n.collapsed,fetchingMoreNotices:o.effects["global/fetchMoreNotices"],fetchingNotices:o.effects["global/fetchNotices"],notices:n.notices}}))(se),de=n(23665),ue=function(e){var t=e.theme,n=e.layout,o=A().right;return"dark"===t&&"top"===n&&(o="".concat(A().right,"  ").concat(A().dark)),(0,T.jsxs)("div",{className:o,children:[(0,T.jsx)("span",{className:A().topup,children:(0,T.jsxs)(r.Z,{className:A().button,onClick:function(){u.m8.push("/dash/account/topup")},children:[(0,T.jsx)(de.Z,{}),(0,u.wv)({id:"accountandsettings.basic.topup"})]})}),(0,T.jsx)(O,{}),(0,T.jsx)(le,{}),(0,T.jsx)(S,{menu:!0}),!1,(0,T.jsx)(u.pD,{className:A().action})]})},pe=(0,u.$j)((function(e){var t=e.settings;return{theme:t.navTheme,layout:t.layout}}))(ue),he=n(82405),me=n(45392),ge=n.n(me),ve=(0,T.jsx)(i.ZP,{status:403,title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:(0,T.jsx)(r.Z,{type:"primary",children:(0,T.jsx)(d.rU,{to:"/user/login",children:"Go Login"})})}),xe=function e(t){return t.map((function(t){var n=(0,a.Z)((0,a.Z)({},t),{},{children:t.children?e(t.children):void 0});return p.Z.check(t.authority,n,null)}))},fe=(0,T.jsx)(s.Z,{copyright:"".concat((new Date).getFullYear(),"  TOPSOFT-AI-PROPHET"),links:[]}),je=function(e){var t=e.dispatch,n=e.children,i=e.settings,r=e.location,s=void 0===r?{pathname:"/"}:r,h=(0,l.useRef)([]);(0,l.useEffect)((function(){t&&t({type:"user/fetchCurrent"})}),[]);var m=function(e){t&&t({type:"global/changeLayoutCollapsed",payload:e})},g=(0,l.useMemo)((function(){return(0,he.nG)(s.pathname||"/",h.current).pop()||{authority:void 0}}),[s.pathname]),v=(0,u.YB)(),x=v.formatMessage;return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(c.ZP,(0,a.Z)((0,a.Z)((0,a.Z)({formatMessage:x},e),i),{},{onCollapse:m,menu:{defaultOpenAll:!0,autoClose:!1},menuHeaderRender:function(){return e.collapsed?(0,T.jsx)("span",{}):(0,T.jsx)("div",{id:"customize_menu_header",onClick:function(){u.m8.push("/dash/dashboard/workplace")},style:{width:"100%"},children:(0,T.jsx)("img",{src:ge(),style:{height:"65px"}})})},menuItemRender:function(e,t){return e.isUrl||!e.path||s.pathname===e.path?t:(0,T.jsx)(d.rU,{to:e.path,children:t})},breadcrumbRender:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[{path:"/",breadcrumbName:x({id:"menu.home"})}].concat((0,o.Z)(e))},itemRender:function(e,t,n,o){var a=0===n.indexOf(e);return a?(0,T.jsx)(d.rU,{to:o.join("/"),children:e.breadcrumbName}):(0,T.jsx)("span",{children:e.breadcrumbName})},footerRender:function(){return fe},menuDataRender:xe,rightContentRender:function(){return(0,T.jsx)(pe,{})},postMenuData:function(e){return h.current=e||[],e||[]},children:(0,T.jsx)(p.Z,{authority:g.authority,noMatch:ve,children:n})}))})},ye=(0,u.$j)((function(e){var t=e.global,n=e.settings;return{collapsed:t.collapsed,settings:n}}))(je)},45392:function(e,t,n){e.exports=n.p+"static/xzpt.ee869cac.png"}}]);