(self["webpackChunkai_prophet_front"]=self["webpackChunkai_prophet_front"]||[]).push([[7856],{13253:function(e){e.exports={formRow:"antd-pro-pages-dashboard-model-creator-json-generator-index.css-formRow",formGroup:"antd-pro-pages-dashboard-model-creator-json-generator-index.css-formGroup",parametergroup:"antd-pro-pages-dashboard-model-creator-json-generator-index.css-parametergroup",parameterHeader:"antd-pro-pages-dashboard-model-creator-json-generator-index.css-parameterHeader",container:"antd-pro-pages-dashboard-model-creator-json-generator-index.css-container",formRowButton:"antd-pro-pages-dashboard-model-creator-json-generator-index.css-formRowButton",downloadLink:"antd-pro-pages-dashboard-model-creator-json-generator-index.css-downloadLink",resetButton:"antd-pro-pages-dashboard-model-creator-json-generator-index.css-resetButton"}},61636:function(e){e.exports={card1:"antd-pro-pages-dashboard-model-creator-index-card1",card2:"antd-pro-pages-dashboard-model-creator-index-card2",card3:"antd-pro-pages-dashboard-model-creator-index-card3",content:"antd-pro-pages-dashboard-model-creator-index-content",para:"antd-pro-pages-dashboard-model-creator-index-para",card4:"antd-pro-pages-dashboard-model-creator-index-card4",upload:"antd-pro-pages-dashboard-model-creator-index-upload",button:"antd-pro-pages-dashboard-model-creator-index-button",footer:"antd-pro-pages-dashboard-model-creator-index-footer",bottomDiv:"antd-pro-pages-dashboard-model-creator-index-bottomDiv"}},60378:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return T}});t(12399);var r=t(82404),o=(t(37092),t(14141)),n=(t(13753),t(48429)),d=(t(5317),t(87555)),s=(t(44862),t(42091)),i=(t(52222),t(65507)),l=(t(67604),t(46906)),c=(t(68137),t(50532)),m=(t(83557),t(69564)),p=(t(14643),t(92909)),u=t(68699),h=t(60360),g=t(66646),b=t(65353),f=t(83693),x=(t(26780),t(46567)),v=t(94043),C=t.n(v),j=t(67294),w=t(2824),S=t(87557),Z=t(61636),k=t.n(Z),y=t(57119),N=t(7085),F=t(84391),R=t(636),V=(t(43623),t(28930)),I=t(99463),O=t(56361),J=t(50189),M=t(44742),_=(t(13253),t(85893)),G=function(e){var a=e.index,t=e.parameter,r=e.onChange,o=e.onDelete;return(0,_.jsxs)("div",{className:"parametergroup",children:[(0,_.jsxs)("div",{className:"parameterHeader",children:[(0,_.jsxs)("h2",{children:[(0,S.wv)({id:"pages.dashboard.modelCreator.JsonGenerator.parameterGroup.parameterHeader"}),a]}),(0,_.jsx)("button",{onClick:o,children:(0,S.wv)({id:"pages.dashboard.modelCreator.JsonGenerator.parameterGroup.parameterHeader.button"})})]}),(0,_.jsxs)("div",{className:"formRow",style:{marginBottom:"1.25rem"},children:[(0,_.jsxs)("div",{className:"formGroup",children:[(0,_.jsx)("label",{children:(0,S.wv)({id:"pages.dashboard.modelCreator.JsonGenerator.parameterGroup.formRow.formGroup1"})}),(0,_.jsx)("input",{type:"text",name:"name",onChange:function(e){return r(e.target.name,e.target.value)},value:t.name,autoComplete:"off"})]}),(0,_.jsxs)("div",{className:"formGroup",children:[(0,_.jsx)("label",{children:(0,S.wv)({id:"pages.dashboard.modelCreator.JsonGenerator.parameterGroup.formRow.formGroup2"})}),(0,_.jsx)("input",{type:"text",name:"ai_description",onChange:function(e){return r(e.target.name,e.target.value)},value:t.ai_description,autoComplete:"off"})]})]})]})},B=j.forwardRef((function(e){var a={total_param:2,details:[{name:"Gender",data_type:0,ai_description:"Your gender, 1-Female ; 2-Male"},{name:"Vitamins",data_type:0,ai_description:"Do you take any supplements or vitamins? 1 - yes 2 - no"}]},t=(0,j.useState)(a.details),r=(0,M.Z)(t,2),o=r[0],d=r[1],s=(0,j.useState)({}),i=(0,M.Z)(s,2),l=i[0],c=i[1],m=(0,j.useState)(""),p=(0,M.Z)(m,2),u=p[0],h=p[1];(0,j.useEffect)((function(){c({total_param:o.length,details:o})}),[o]),(0,j.useEffect)((function(){var e="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(l)));h(e)}),[l]);var g=function(){d((function(e){return[].concat((0,J.Z)(e),[{name:"",data_type:0,ai_description:""}])}))},b=function(e){d((function(a){return a.filter((function(a,t){return t!==e}))}))},f=function(e,a,t){d((function(r){return r.map((function(r,o){return o===e?(0,O.Z)((0,O.Z)({},r),{},(0,I.Z)({},a,t)):r}))}))},v=function(){d((0,J.Z)(a.details))};return(0,_.jsx)(x.Z,{title:(0,S.wv)({id:"pages.dashboard.modelCreator.Modal2.title"}),centered:!0,width:888,onCancel:function(){e.setParentState({JSONModalVisible:!1})},visible:e.visible,footer:[(0,_.jsx)(n.Z,{onClick:function(){e.setParentState({JSONModalVisible:!1})},children:(0,S.wv)({id:"pages.dashboard.modelCreator.Modal2.footer.button1"})},"back"),(0,_.jsx)(n.Z,{onClick:function(){console.log(l),e.setParentFormField({JSONData:JSON.stringify(l)}),e.setParentState({JSONModalVisible:!1})},children:(0,S.wv)({id:"pages.dashboard.modelCreator.Modal2.footer.button2"})},"submit")],children:(0,_.jsx)("div",{children:(0,_.jsxs)("div",{className:"container",children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("h1",{children:(0,S.wv)({id:"pages.dashboard.modelCreator.JsonGenerator.container.header1"})}),(0,_.jsx)("div",{children:o.map((function(e,a){return(0,_.jsx)(G,{index:a,parameter:e,onChange:f.bind(null,a),onDelete:b.bind(null,a)},a)}))}),(0,_.jsx)("button",{onClick:g,children:(0,S.wv)({id:"pages.dashboard.modelCreator.JsonGenerator.container.button"})})]}),(0,_.jsx)("br",{}),(0,_.jsxs)("div",{children:[(0,_.jsx)("h1",{children:(0,S.wv)({id:"pages.dashboard.modelCreator.JsonGenerator.container.header2"})}),(0,_.jsx)("div",{style:{width:"700px"},children:(0,_.jsx)("pre",{children:JSON.stringify(l,null,2)})}),(0,_.jsxs)("div",{className:"footer",children:[(0,_.jsx)("a",{href:u,className:"downloadLink",download:"test.json",children:(0,S.wv)({id:"pages.dashboard.modelCreator.JsonGenerator.container.footer"})}),(0,_.jsx)(V.Z,{title:"Sure to Reset?",onConfirm:function(){v(),e.setParentFormField({JSONData:""})},children:(0,_.jsx)("button",{className:"resetButton",children:(0,S.wv)({id:"pages.dashboard.modelCreator.JsonGenerator.container.footer.button"})})})]})]})]})})})})),P=B,U=x.Z.confirm;function D(){U({style:{top:"30%"},title:(0,S.wv)({id:"pages.dashboard.modelCreator.Form.FormItem.showConfirm.title"}),icon:(0,_.jsx)(y.Z,{}),content:(0,S.wv)({id:"pages.dashboard.modelCreator.Form.FormItem.showConfirm.title"}),onOk:function(){S.m8.push("/dash/model/model")},onCancel:function(){}})}var T=function(e){(0,b.Z)(t,e);var a=(0,f.Z)(t);function t(e){var r;return(0,h.Z)(this,t),r=a.call(this,e),r.scrollToAnchor=function(e){if(e){var a=document.getElementById(e);a&&a.scrollIntoView()}},r.uploadOnChange=function(e){console.log(e),1===e.fileList.length?(console.log("done"),r.setState({UploadYN:!0})):r.setState({UploadYN:!1})},r.onchangeInTreeSelect=function(e){r.setState({selectValue:e,selected:!0})},r.onCheck=(0,u.Z)(C().mark((function e(){var a,t;return C().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.formRef.current.validateFields();case 3:if(a=e.sent,console.log(a),r.state.UploadYN){e.next=9;break}return p.default.warn((0,S.wv)({id:"pages.dashboard.modelCreator.Form.FormItem.onCheck.message.warn.upload"})),r.scrollToAnchor("Upload"),e.abrupt("return");case 9:console.log("Success:",a),t=new FormData,t.append("ai_name",r.formRef.current.getFieldValue("modelName")),t.append("ai_price",Number(r.formRef.current.getFieldValue("price"))),t.append("ai_true_desc",r.formRef.current.getFieldValue("intro")),t.append("ai_desc",r.formRef.current.getFieldValue("JSONData")),t.append("ai_opUnit",r.formRef.current.getFieldValue("Unit")),t.append("ai_type",r.formRef.current.getFieldValue("algorithm")),t.append("auto_active",r.state.checkBox?1:0),t.append("dataset",r.state.dataSet),(0,R.Z)("/tasks/train",{method:"POST",data:t}).then((function(e){200===e.code?(r.setState({submitState:!0}),p.default.loading({duration:2,content:"\u8bad\u7ec3\u8fdb\u884c\u4e2d..",style:{marginTop:"42vh"}}).then((function(){p.default.success({duration:.5,content:(0,S.wv)({id:"pages.dashboard.modelCreator.Form.FormItem.onCheck.message.warn.submit.success"}),style:{marginTop:"42vh"}}).then((function(){S.m8.push("/dash/model/model")}))})),console.log("success")):p.default.warn((0,S.wv)({id:"pages.dashboard.modelCreator.Form.FormItem.onCheck.message.warn.submit"}))})),e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](0),console.log("Failed:",e.t0),p.default.warn((0,S.wv)({id:"pages.dashboard.modelCreator.Form.FormItem.onCheck.message.warn.submit"}));case 26:case"end":return e.stop()}}),e,null,[[0,22]])}))),r.beforeUpload=function(e){var a=e.name.split("."),t=e.name.split(".")[a.length-1];console.log(t);var o=e.size/1024/1024<800,n="csv"===t.toLowerCase();return o?n?(r.setState({dataSet:e}),!1):(p.default.error((0,S.wv)({id:"pages.dashboard.modelCreator.Form.FormItem.beforeUpload.message.error.fileType"})),m.Z.LIST_IGNORE):(p.default.error((0,S.wv)({id:"pages.dashboard.modelCreator.Form.FormItem.beforeUpload.message.error"})),m.Z.LIST_IGNORE)},r.uploadOnRemove=function(){console.log("removed")},r.checkBoxOnChange=function(e){console.log("checked = ".concat(e.target.checked)),e&&r.setState({checkBox:!r.state.checkBox})},r.card3RenderPara=function(e){var a="",t="";return r.state.selected?(e.map((function(e){return e.children.map((function(e){return e.value===r.state.selectValue&&(a=e.title,t=e.link),0})),0})),(0,_.jsxs)("div",{className:k().para,children:[(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-para1"}),(0,_.jsx)("strong",{children:a}),(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-para2"}),(0,_.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",children:[(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-para3"}),a,(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-para4"})]}),(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-para5"})]})):(0,_.jsx)("div",{className:k().para,children:(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-para6"})})},r.formRef=j.createRef(),r.parentRef=j.createRef(),r.state={submitState:!1,selectValue:void 0,card3Para:void 0,loading:!1,UploadYN:!1,submitModalVisible:!1,JSONModalVisible:!1,checkBox:!0,dataSet:void 0},r}return(0,g.Z)(t,[{key:"setSubmitModalVisible",value:function(e){this.setState({submitModalVisible:e})}},{key:"setJSONModalVisible",value:function(e){this.setState({JSONModalVisible:e})}},{key:"setParentState",value:function(e){this.setState(e)}},{key:"setParentFormField",value:function(e){this.formRef.current.setFieldsValue(e)}},{key:"render",value:function(){var e=this,a=(0,_.jsxs)("div",{children:[(0,S.wv)({id:"pages.dashboard.modelCreator.headerContent-textpara1"}),(0,_.jsx)("a",{children:(0,S.wv)({id:"pages.dashboard.modelCreator.headerContent-textpara2"})}),(0,S.wv)({id:"pages.dashboard.modelCreator.headerContent-textpara3"})]}),t=[{title:(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-treeSelect1"}),value:"a",selectable:!1,children:[{title:(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-treeSelect1-1"}),value:0,link:"https://www.example1.com"},{title:(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-treeSelect1-2"}),value:1,link:"http://example.com/"}]}],p=[{key:1,title:(0,S.wv)({id:"pages.dashboard.modelCreator.card1-title"}),content:(0,_.jsx)("div",{className:k().content,children:(0,_.jsxs)(d.Z,{gutter:[36,36],justify:"space-around",align:"middle",children:[(0,_.jsxs)(i.Z,{xs:18,sm:16,md:12,lg:8,xl:8,children:[(0,_.jsx)(l.Z.Item,{rules:[{required:!0,min:5,message:"\u540d\u79f0\u81f3\u5c11\u4e3a 5 \u4e2a\u5b57\u7b26"}],name:"modelName",label:(0,S.wv)({id:"pages.dashboard.modelCreator.card1-content-input1"}),children:(0,_.jsx)(c.Z,{placeholder:(0,S.wv)({id:"pages.dashboard.modelCreator.card1-content-input1-placeHolder"})})}),(0,_.jsx)(l.Z.Item,{name:"price",label:(0,S.wv)({id:"pages.dashboard.modelCreator.card1-content-input2"}),rules:[{required:!0,message:(0,S.wv)({id:"pages.dashboard.modelCreator.cantbeblank"})},{pattern:/^([1-9][0-9]*)+(.[0-9]{1,2})?$/,message:"\u8bf7\u586b\u5199\u5c0f\u6570\uff08\u81f3\u591a\u4e24\u4f4d\uff09\u6216\u8005\u6574\u6570"},{}],children:(0,_.jsx)(c.Z,{onChange:function(a){a&&e.formRef.current.setFieldsValue({price:a.target.value})},placeholder:(0,S.wv)({id:"pages.dashboard.modelCreator.card1-content-input2-placeHolder"})})})]}),(0,_.jsx)(i.Z,{xs:18,sm:16,md:12,lg:8,xl:8,children:(0,_.jsx)(l.Z.Item,{name:"intro",label:(0,S.wv)({id:"pages.dashboard.modelCreator.card1-content-input3"}),rules:[{required:!0,min:10,message:"\u6a21\u578b\u4ecb\u7ecd\u81f3\u5c11\u4e3a 10 \u4e2a\u5b57\u7b26"}],children:(0,_.jsx)(c.Z.TextArea,{onChange:function(a){a&&e.formRef.current.setFieldsValue({intro:a.target.value})},autoSize:{minRows:4,maxRows:6},showCount:!0,maxLength:150,placeholder:(0,S.wv)({id:"pages.dashboard.modelCreator.card1-content-input3-placeHolder"})})})}),(0,_.jsx)(i.Z,{xs:18,sm:16,md:12,lg:8,xl:8,children:(0,_.jsx)(l.Z.Item,{name:"checkBox",children:(0,_.jsx)(s.Z,{defaultChecked:!0,onChange:this.checkBoxOnChange,children:(0,S.wv)({id:"pages.dashboard.modelCreator.card1-content-input4"})})})})]})}),style:k().card1},{key:2,title:(0,S.wv)({id:"pages.dashboard.modelCreator.card2-title"}),content:(0,_.jsx)("div",{children:(0,_.jsxs)(d.Z,{gutter:[36,36],justify:"space-around",align:"middle",children:[(0,_.jsx)(i.Z,{xs:18,sm:16,md:12,lg:8,xl:8,children:(0,_.jsx)(l.Z.Item,{name:"JSONData",label:(0,S.wv)({id:"pages.dashboard.modelCreator.card2-content-input1"}),rules:[{required:!0,message:"You haven't generate JSON data"}],children:(0,_.jsx)(n.Z,{onClick:function(){e.setJSONModalVisible(!0)},children:(0,S.wv)({id:"pages.dashboard.modelCreator.Modal2.title"})})})}),(0,_.jsx)(i.Z,{xs:18,sm:16,md:12,lg:8,xl:8,children:(0,_.jsx)(l.Z.Item,{name:"Unit",label:(0,S.wv)({id:"pages.dashboard.modelCreator.card2-content-input2"}),rules:[{required:!0,message:(0,S.wv)({id:"pages.dashboard.modelCreator.cantbeblank"})}],children:(0,_.jsx)(c.Z,{onChange:function(){},placeholder:(0,S.wv)({id:"pages.dashboard.modelCreator.card2-content-input2-placeHolder"})})})})]})}),style:k().card2},{key:3,content:(0,_.jsx)("div",{className:k().content,children:(0,_.jsxs)(d.Z,{gutter:[36,36],justify:"space-around",align:"middle",children:[(0,_.jsx)(i.Z,{xs:18,sm:16,md:12,lg:8,xl:8,children:(0,_.jsx)(l.Z.Item,{name:"algorithm",label:(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-treeSelect-title"}),rules:[{required:!0,message:(0,S.wv)({id:"pages.dashboard.modelCreator.cantbeblank"})}],children:(0,_.jsx)(o.Z,{treeDefaultExpandAll:!0,value:this.state.selectValue,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:t,onChange:this.onchangeInTreeSelect,placeholder:(0,S.wv)({id:"pages.dashboard.modelCreator.card3-content-treeSelect-placeholder"})})})}),(0,_.jsx)(i.Z,{xs:18,sm:16,md:12,lg:8,xl:8,children:this.card3RenderPara(t)})]})}),style:k().card3},{key:4,title:(0,S.wv)({id:"pages.dashboard.modelCreator.card4-title"}),content:(0,_.jsxs)("div",{id:"Upload",className:k().content,children:[(0,_.jsx)("div",{className:k().upload,children:(0,_.jsx)(m.Z,{maxCount:1,beforeUpload:this.beforeUpload,onRemove:this.uploadOnRemove,onChange:this.uploadOnChange,children:(0,_.jsxs)(n.Z,{className:k().button,children:[this.state.loading?(0,_.jsx)(N.Z,{}):(0,_.jsx)(F.Z,{}),(0,S.wv)({id:"pages.dashboard.modelCreator.card4-content-button"})]})})}),(0,_.jsx)("div",{children:(0,_.jsx)("p",{children:(0,S.wv)({id:"pages.dashboard.modelCreator.card4-content-uploadNote"})})}),(0,_.jsx)("div",{className:k().footer,children:(0,_.jsx)("p",{children:(0,S.wv)({id:"pages.dashboard.modelCreator.card4-content-footer"})})})]}),style:k().card4}];return(0,_.jsx)(w.ZP,{content:a,children:(0,_.jsxs)("div",{children:[(0,_.jsxs)(l.Z,{layout:"vertical",ref:this.formRef,children:[p.map((function(e){return(0,_.jsx)(r.Z,{className:e.style,title:e.title,children:e.content},e.key)})),(0,_.jsx)("div",{className:k().bottomDiv,children:(0,_.jsxs)(l.Z.Item,{children:[(0,_.jsx)(n.Z,{type:"primary",style:{float:"right"},disabled:this.state.submitState,onClick:function(){e.setSubmitModalVisible(!0)},children:(0,S.wv)({id:"pages.dashboard.modelCreator.Form.FormItem.Button.submit"})}),(0,_.jsx)(n.Z,{type:"primary",disabled:this.state.submitState,style:{float:"right",marginRight:"20px"},onClick:function(){D()},children:(0,S.wv)({id:"pages.dashboard.modelCreator.Form.FormItem.Button.cancel"})})]})}),(0,_.jsx)(x.Z,{title:(0,S.wv)({id:"pages.dashboard.aimodels.cardModal.title"}),centered:!0,visible:this.state.submitModalVisible,onOk:function(){return e.setSubmitModalVisible(!1)},onCancel:function(){return e.setSubmitModalVisible(!1)},footer:[(0,_.jsx)(n.Z,{onClick:function(){e.setSubmitModalVisible(!1)},children:(0,S.wv)({id:"pages.dashboard.modelCreator.Modal1.footer.button1"})},"back"),(0,_.jsx)(n.Z,{htmlType:"submit",type:"primary",onClick:function(){e.onCheck(),e.setSubmitModalVisible(!1)},children:(0,S.wv)({id:"pages.dashboard.modelCreator.Modal1.footer.button2"})},"submit")],children:(0,_.jsx)("p",{children:"\u4f60\u786e\u8ba4\u63d0\u4ea4\u4e48\uff1f"})})]}),(0,_.jsx)(P,{ref:this.parentRef,visible:this.state.JSONModalVisible,setParentState:this.setParentState.bind(this),setParentFormField:this.setParentFormField.bind(this)})]})})}}]),t}(j.Component)}}]);